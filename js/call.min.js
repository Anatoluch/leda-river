$(document).ready(function(){function a(){let a=document.querySelectorAll(".call-form label.error");a.forEach(function(a){a.style="display:none"})}function b(){document.querySelector(".close-form").classList.add("hidden"),document.querySelector(".paralaxe-header__call-row").insertAdjacentHTML("afterbegin","<div style=\"margin: auto;\n    padding: 15px 25px;\n    position: relative;\n    z-index: 2;\n    display: flex;\n\t\twidth: 95vw;\n\t\tmin-width: 320px;\n\t\tmax-width: 600px;\n    justify-content: center;\n    align-items: center;\n    border-radius: 0;\n\t\tbackground: rgba(27, 75, 90, 0.25);\n    backdrop-filter: blur(4px);\n    overflow: hidden;\"><p style=\"text-align: center; font-family: sans-serif; color: #fff !important; text-shadow: 0 0px 3px #000; font-size: 45px; font-weight: 500;\">\u0421\u043F\u0430\u0441\u0438\u0431\u043E!<br>\u0412\u0430\u0448\u0430&nbsp;\u0437\u0430\u044F\u0432\u043A\u0430 \u043F\u0440\u0438\u043D\u044F\u0442\u0430!</p>\n\t\t</div>"),document.querySelector(".call-form__title").classList.add("hidden"),g.classList.add("hidden"),setTimeout(c,3500),setTimeout(function(){location.reload()},3500)}function c(){f.classList.remove("noscroll"),document.querySelector(".call-form__wrapper").classList.add("hidden"),g.classList.remove("hidden"),callModal.innerHTML=""}function d(){let a=$(".call-form").serialize();return $.ajax({type:"POST",url:"php/call.php",data:a,success:async function(){await $(".call-form").slideUp(900),document.querySelector(".paralaxe-header__call-row").style.cssText=`padding: 0 !important;`,setTimeout(b,1100)}}),!1}const f=document.body.closest("html"),g=document.querySelector(".call-form");let h=document.querySelectorAll(".btn-show");const i=document.querySelectorAll(".call-form__input"),j=document.querySelectorAll(".call-form__fake-placeholder");for(let a of i){const b=a.closest(".call-form__item-row"),c=b.querySelector(".call-form__fake-placeholder");a.addEventListener("focus",function(){c&&c.classList.add("active")}),a.addEventListener("blur",function(){0<a.value.length?c&&c.classList.add("active"):c&&c.classList.remove("active")})}let k,l,m,n=document.querySelector("#dateInp"),o=new Date;k=o.getFullYear().toString(),l=(o.getMonth()+1).toString(),m=o.getDate().toString(),dateHour=o.getHours().toString(),dateMinutes=o.getMinutes().toString(),10>l&&(l=`0${l}`),10>m&&(m=`0${m}`),10>dateHour&&(dateHour=`0${dateHour}`),10>dateMinutes&&(dateMinutes=`0${dateMinutes}`),n.min=`${k}-${l}-${m}T${dateHour}:${dateMinutes}`;let p=document.querySelector("#commentInp"),q=document.querySelector(".call-form__text-counter");p.addEventListener("focus",function(){q.classList.remove("transp-count")}),p.addEventListener("blur",function(){q.classList.add("transp-count")});let r=360,s=document.querySelector("#char-counter");$(".call-form textarea").keyup(function(){this.value.length>r&&(this.value=this.value.substr(0,r))}),$("#char-counter").html(360),$("#commentInp").keyup(function(){let a=this.value.length;this.value.length>r&&(this.value=this.value.substr(0,r));let b=r-a;0>=b?$("#char-counter").html("0"):$("#char-counter").html(b)}),h.forEach(function(a){a.addEventListener("click",function(a){a.preventDefault(),document.querySelector(".call-form__wrapper").classList.remove("hidden"),f.classList.add("noscroll")})}),document.querySelector(".close-form").addEventListener("click",function(){document.querySelector(".call-form__wrapper").classList.add("hidden"),f.classList.remove("noscroll"),g.reset(),y.checked=!1,x.checked=!0,w.disabled=!0,A.disabled=!0,x.style="display:block",y.style="display:none",z.classList.add("hidden"),A.style="display:none",v.classList.add("hidden"),u.disabled=!1,A.blur(),s.innerText=r,z.classList.remove("active"),g.removeAttribute("method","POST"),g.removeAttribute("action","./php/call.php"),j.forEach(function(a){a.classList.remove("active")}),a()});let t=document.querySelectorAll(".call-form input");t.forEach(function(a){a.addEventListener("paste",function(a){a.preventDefault()})});let u=document.querySelector(".call-form__policy"),v=document.querySelector(".bot-test"),w=document.querySelector(".submit-btn__wrapper .btn"),x=document.querySelector("#bot-checkbox"),y=document.querySelector("#hum-checkbox"),z=document.querySelector("#bot-placeholder"),A=document.querySelector("#control-question");u.addEventListener("change",function(a){!0==a.target.checked?v.classList.remove("hidden"):v.classList.add("hidden")}),x.addEventListener("change",function(a){!1==a.target.checked&&(x.style="display:none",y.style="display:block")}),y.addEventListener("change",function(a){a.target.checked?(y.style="display:none",z.classList.remove("hidden"),A.style="display:block",A.disabled=!1):(w.disabled=!0,A.disabled=!0,A.style="display:none")}),A.addEventListener("input",function(a){let b=a.target.value.toLowerCase();"\u043C\u043E\u0441\u043A\u0432\u0430"===b?(w.disabled=!1,g.setAttribute("method","POST"),g.setAttribute("action","./php/call.php"),z.classList.add("hidden"),A.style="display:none",z.classList.remove("active"),A.blur(),v.classList.add("hidden"),u.disabled=!0):w.disabled=!0}),A.addEventListener("input",function(){this.value=this.value.replace(/[^А-Яа-я-]/g,"")});let B=document.querySelector("#nameInp");B.addEventListener("input",function(){this.value=this.value.replace(/[^ А-Яа-я-]/g,"")});let C=document.querySelector("#telInp");C.addEventListener("input",function(){this.value=this.value.replace(/[^+0-9]/g,"")});C.addEventListener("focus",function(){1>this.value.length&&(this.value=`+${this.value}`,document.querySelector("#telInp-error")&&document.querySelector("#telInp-error").remove()),this.value=this.value}),C.addEventListener("blur",function(){if(1>=this.value.length){this.value="";const a=this.closest(".call-form__item-row");a.querySelector(".call-form__fake-placeholder").classList.remove("active"),document.querySelector("#telInp-error").remove()}else 1>this.value.length&&document.querySelector("#telInp-error")&&document.querySelector("#telInp-error").remove()}),C.addEventListener("input",function(){"+"!=this.value[0]&&""!=this.value?this.value=`+${this.value.replace(/[^0-9]/g,"")}`:"+"==this.value[0]?this.value=`+${this.value.replace(/[^0-9]/g,"")}`:1>this.value.length&&(this.value=`+${this.value}`)}),$(".call-form")&&$(".call-form").validate({rules:{clientName:{required:!0,minlength:2,maxlength:21},clientPhone:{required:!0,minlength:12,maxlength:13},date:{required:!0,minlength:12,maxlength:16},policy_agreement:{required:!0},botQuestion:{required:!0,minlength:6,maxlength:6}},messages:{clientName:{required:"\u0410 \u043A\u0430\u043A \u043A \u0412\u0430\u043C \u043E\u0431\u0440\u0430\u0449\u0430\u0442\u044C\u0441\u044F?!",minlength:"\u0418\u043C\u044F \u0432\u0432\u0435\u0434\u0435\u043D\u043E \u043D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u043E!",maxlength:"\u0412\u0430\u0448\u0435 \u0438\u043C\u044F \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u0434\u043B\u0438\u043D\u043D\u043E\u0435!"},clientPhone:{required:"\u0412\u0430\u0448 \u0442\u0435\u043B\u0435\u0444\u043E\u043D?",minlength:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 \u043D\u043E\u043C\u0435\u0440!",maxlength:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0432\u043E\u0434\u0430!!!"},date:{required:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F \u0432\u044B\u0445\u043E\u0434\u0430 \u0432 \u043C\u043E\u0440\u0435?",minlength:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0432\u043E\u0434\u0430!",maxlength:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0432\u043E\u0434\u0430!"},policy_agreement:{required:"\u0427\u0442\u043E\u0431\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435, \u043D\u0443\u0436\u043D\u043E \u043F\u0440\u0438\u043D\u044F\u0442\u044C \u043F\u043E\u043B\u0438\u0442\u0438\u043A\u0443 \u043A\u043E\u043D\u0444\u0438\u0434\u0435\u043D\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u0438!"},botQuestion:{required:"\u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u043F\u043E\u043B\u0435!",minlength:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0432\u043E\u0434\u0430!",maxlength:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0432\u043E\u0434\u0430!"}},submitHandler:function(){d()}})});